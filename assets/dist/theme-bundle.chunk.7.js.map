{"version":3,"sources":["webpack:///./assets/js/theme/category.js","webpack:///./assets/js/theme/common/utils/translations-utils.js","webpack:///./assets/js/theme/global/compare-products.js","webpack:///./node_modules/lodash/_SetCache.js","webpack:///./node_modules/lodash/_arrayIncludes.js","webpack:///./node_modules/lodash/_arrayIncludesWith.js","webpack:///./node_modules/lodash/_cacheHas.js","webpack:///./node_modules/lodash/isArrayLikeObject.js","webpack:///./assets/js/theme/catalog.js","webpack:///./assets/js/theme/common/faceted-search.js","webpack:///./node_modules/lodash/union.js","webpack:///./node_modules/lodash/_baseFlatten.js","webpack:///./node_modules/lodash/_arrayPush.js","webpack:///./node_modules/lodash/_isFlattenable.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_baseUniq.js","webpack:///./node_modules/lodash/_createSet.js","webpack:///./node_modules/lodash/_setToArray.js","webpack:///./node_modules/lodash/without.js","webpack:///./node_modules/lodash/_baseDifference.js","webpack:///./node_modules/lodash/_arrayMap.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./assets/js/theme/custom/its-category.js","webpack:///./assets/js/theme/custom/toggle-category-listing-view.js"],"names":["Category","_CatalogPage","context","_this","call","validationDictionary","createTranslationDictionary","ITSCategory","toggleCategoryListingView","ToggleCategoryListingView","_proto","prototype","setLiveRegionAttributes","$element","roleType","ariaLiveStatus","attr","role","makeShopByPriceFilterAccessible","_this2","$","length","hasClass","focus","on","onReady","_this3","this","arrangeFocusOnSortBy","e","currentTarget","next","compareProducts","initFacetedSearch","onSortBySubmit","bind","hooks","setLiveRegionsAttributes","ariaNotifyNoProducts","facetedSearch","initMobileDropdowns","$noProductsMessage","_this4","_this$validationDicti","onMinPriceError","price_min_evaluation","onMaxPriceError","price_max_evaluation","minPriceNotEntered","price_min_not_entered","maxPriceNotEntered","price_max_not_entered","onInvalidPrice","price_invalid_value","$productListingContainer","$facetedSearchContainer","productsPerPage","categoryProductsPerPage","requestOptions","config","category","shop_by_price","products","limit","template","productListing","getRequestTemplateType","sidebar","showMore","FacetedSearch","content","html","triggerHandler","animate","scrollTop","afterFacetUpdate","validationErrorMessages","NewOpts","updateRequestOptions","CatalogPage","isTranslationDictionaryNotEmpty","dictionary","Object","keys","activeDictionary","i","arguments","JSON","parse","undefined","chooseActiveDictionary","validationDictionaryJSON","validationFallbackDictionaryJSON","validationDefaultDictionaryJSON","localizations","values","map","key","split","pop","reduce","acc","updateCounterNav","counter","$link","urls","is","addClass","compare","join","find","removeClass","_ref","noCompareMessage","compareCounter","$compareLink","$checked","index","element","value","get","event","item","product","$clickedCompareLink","checked","push","indexOf","splice","decrementCounter","showAlertModal","preventDefault","isArray","module","exports","baseIndexOf","array","comparator","isArrayLike","isObjectLike","_PageManager","window","addEventListener","document","activeElement","id","localStorage","setItem","$sortBySelector","getItem","removeItem","url","Url","location","href","queryParams","serialize","query","page","format","pathname","search","urlUtils","buildQueryString","PageManager","defaultOptions","accordionToggleSelector","blockerSelector","clearFacetSelector","componentSelector","facetNavListSelector","priceRangeErrorSelector","priceRangeFieldsetSelector","priceRangeFormSelector","priceRangeMaxPriceSelector","priceRangeMinPriceSelector","showMoreToggleSelector","facetedSearchFilterItems","modal","modalFactory","modalOpen","callback","options","_extend","collapsedFacets","collapsedFacetItems","collapsibleFactory","initPriceValidator","each","navList","collapseFacetItems","accordionToggle","collapsible","data","isCollapsed","targetId","setTimeout","collapseAllFacets","onStateChange","onToggleClick","onAccordionToggle","onClearFacet","onFacetClick","onRangeSubmit","filterFacetItems","bindEvents","opts","innerWidth","prependTo","relocateMobileDropdowns","refreshView","restoreCollapsedFacets","restoreCollapsedFacetItems","console","log","updateView","show","api","getPage","getUrl","err","hide","Error","expandFacetItems","$navList","_without","hasMoreResults","_union","toggleFacetItems","_includes","getMoreFacetResults","facet","facetUrl","params","list_all","response","open","updateContent","$items","val","toLowerCase","text","expandFacet","$accordionToggle","collapseFacet","close","expandAllFacets","_this5","validator","nod","selectors","errorSelector","fieldsetSelector","formSelector","maxPriceSelector","minPriceSelector","Validators","setMinMaxPriceValidation","priceRangeValidator","_this6","_this7","unbindEvents","onPopState","off","stopPropagation","goToUrl","$toggle","toggleClass","urlQueryParams","assign","areAll","constants","VALID","decodeURI","parseQueryParams","hasOwnProperty","currentUrl","URLSearchParams","has","updatedLinkUrl","replace","history","replaceState","title","trigger","baseFlatten","baseRest","baseUniq","isArrayLikeObject","union","arrays","arrayPush","isFlattenable","depth","predicate","isStrict","result","offset","Symbol","isArguments","spreadableSymbol","isConcatSpreadable","SetCache","arrayIncludes","arrayIncludesWith","cacheHas","createSet","setToArray","iteratee","includes","isCommon","seen","set","outer","computed","seenIndex","baseDifference","without","arrayMap","baseUnary","valuesLength","valuesIndex","Array","func","defaultViewType","oppositeViewType","loadingOverlay","addToggleEvents","init","fullWidthTemplate","getProductDescriptions","$products","toArray","$productIDs","Number","$graphQLToken","fetch","method","credentials","headers","body","stringify","then","res","json","request","gqlProducts","site","edges","forEach","node","entityId","description","getStoredViewType","sessionStorage","type","pageType","storeViewType","addStyleClass","getCategoryPage","img","height","storedViewType"],"mappings":"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","file":"theme-bundle.chunk.7.js","sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\nimport CatalogPage from './catalog';\nimport compareProducts from './global/compare-products';\nimport FacetedSearch from './common/faceted-search';\nimport { createTranslationDictionary } from '../theme/common/utils/translations-utils';\nimport ITSCategory from './custom/its-category';\nimport ToggleCategoryListingView from './custom/toggle-category-listing-view';\n\nexport default class Category extends CatalogPage {\n    constructor(context) {\n        super(context);\n        this.validationDictionary = createTranslationDictionary(context);\n\n        /**\n         * IntuitSolutions - Custom Category\n         */\n        this.ITSCategory = new ITSCategory(context);\n        this.toggleCategoryListingView = new ToggleCategoryListingView(context);\n    }\n\n    setLiveRegionAttributes($element, roleType, ariaLiveStatus) {\n        $element.attr({\n            role: roleType,\n            'aria-live': ariaLiveStatus,\n        });\n    }\n\n    makeShopByPriceFilterAccessible() {\n        if (!$('[data-shop-by-price]').length) return;\n\n        if ($('.navList-action').hasClass('is-active')) {\n            $('a.navList-action.is-active').focus();\n        }\n\n        $('a.navList-action').on('click', () => this.setLiveRegionAttributes($('span.price-filter-message'), 'status', 'assertive'));\n    }\n\n    onReady() {\n        this.arrangeFocusOnSortBy();\n\n        $('[data-button-type=\"add-cart\"]').on('click', (e) => this.setLiveRegionAttributes($(e.currentTarget).next(), 'status', 'polite'));\n\n        this.makeShopByPriceFilterAccessible();\n\n        compareProducts(this.context);\n\n        if ($('#facetedSearch').length > 0) {\n            this.initFacetedSearch();\n        } else {\n            this.onSortBySubmit = this.onSortBySubmit.bind(this);\n            hooks.on('sortBy-submitted', this.onSortBySubmit);\n        }\n\n        $('a.reset-btn').on('click', () => this.setLiveRegionsAttributes($('span.reset-message'), 'status', 'polite'));\n\n        this.ariaNotifyNoProducts();\n\n        this.facetedSearch.initMobileDropdowns();\n    }\n\n    ariaNotifyNoProducts() {\n        const $noProductsMessage = $('[data-no-products-notification]');\n        if ($noProductsMessage.length) {\n            $noProductsMessage.focus();\n        }\n    }\n\n    initFacetedSearch() {\n        const {\n            price_min_evaluation: onMinPriceError,\n            price_max_evaluation: onMaxPriceError,\n            price_min_not_entered: minPriceNotEntered,\n            price_max_not_entered: maxPriceNotEntered,\n            price_invalid_value: onInvalidPrice,\n        } = this.validationDictionary;\n        const $productListingContainer = $('#product-listing-container');\n        const $facetedSearchContainer = $('#faceted-search-container');\n        const productsPerPage = this.context.categoryProductsPerPage;\n        const requestOptions = {\n            config: {\n                category: {\n                    shop_by_price: true,\n                    products: {\n                        limit: productsPerPage,\n                    },\n                },\n            },\n            template: {\n                productListing: this.toggleCategoryListingView.getRequestTemplateType('category'),\n                sidebar: 'category/sidebar',\n            },\n            showMore: 'category/show-more',\n        };\n\n\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\n            $productListingContainer.html(content.productListing);\n            $facetedSearchContainer.html(content.sidebar);\n\n            $('body').triggerHandler('compareReset');\n\n            $('html, body').animate({\n                scrollTop: 0,\n            }, 100);\n\n            /**\n             * IntuitSolutions - Category Update\n             */\n            this.ITSCategory.afterFacetUpdate();\n        }, {\n            validationErrorMessages: {\n                onMinPriceError,\n                onMaxPriceError,\n                minPriceNotEntered,\n                maxPriceNotEntered,\n                onInvalidPrice,\n            },\n        });\n\n        $('body').on('productViewModeChanged', () => {\n            const NewOpts = {\n                config: {\n                    category: {\n                        shop_by_price: true,\n                        products: {\n                            limit: productsPerPage,\n                        },\n                    },\n                },\n                template: {\n                    productListing: this.toggleCategoryListingView.getRequestTemplateType('category'),\n                    sidebar: 'category/sidebar',\n                },\n                showMore: 'category/show-more',\n            };\n\n            this.facetedSearch.updateRequestOptions(NewOpts);\n        });\n    }\n}\n","const TRANSLATIONS = 'translations';\nconst isTranslationDictionaryNotEmpty = (dictionary) => !!Object.keys(dictionary[TRANSLATIONS]).length;\nconst chooseActiveDictionary = (...dictionaryJsonList) => {\n    for (let i = 0; i < dictionaryJsonList.length; i++) {\n        const dictionary = JSON.parse(dictionaryJsonList[i]);\n        if (isTranslationDictionaryNotEmpty(dictionary)) {\n            return dictionary;\n        }\n    }\n};\n\n/**\n * defines Translation Dictionary to use\n * @param context provides access to 3 validation JSONs from en.json:\n * validation_messages, validation_fallback_messages and default_messages\n * @returns {Object}\n */\nexport const createTranslationDictionary = (context) => {\n    const { validationDictionaryJSON, validationFallbackDictionaryJSON, validationDefaultDictionaryJSON } = context;\n    const activeDictionary = chooseActiveDictionary(validationDictionaryJSON, validationFallbackDictionaryJSON, validationDefaultDictionaryJSON);\n    const localizations = Object.values(activeDictionary[TRANSLATIONS]);\n    const translationKeys = Object.keys(activeDictionary[TRANSLATIONS]).map(key => key.split('.').pop());\n\n    return translationKeys.reduce((acc, key, i) => {\n        acc[key] = localizations[i];\n        return acc;\n    }, {});\n};\n","import { showAlertModal } from './modal';\n\nfunction decrementCounter(counter, item) {\n    const index = counter.indexOf(item);\n\n    if (index > -1) {\n        counter.splice(index, 1);\n    }\n}\n\nfunction incrementCounter(counter, item) {\n    counter.push(item);\n}\n\nfunction updateCounterNav(counter, $link, urls) {\n    if (counter.length !== 0) {\n        if (!$link.is('visible')) {\n            $link.addClass('show');\n        }\n        $link.attr('href', `${urls.compare}/${counter.join('/')}`);\n        $link.find('span.countPill').html(counter.length);\n    } else {\n        $link.removeClass('show');\n    }\n}\n\nexport default function ({ noCompareMessage, urls }) {\n    let compareCounter = [];\n\n    const $compareLink = $('a[data-compare-nav]');\n\n    $('body').on('compareReset', () => {\n        const $checked = $('body').find('input[name=\"products\\[\\]\"]:checked');\n\n        compareCounter = $checked.length ? $checked.map((index, element) => element.value).get() : [];\n        updateCounterNav(compareCounter, $compareLink, urls);\n    });\n\n    $('body').triggerHandler('compareReset');\n\n    $('body').on('click', '[data-compare-id]', event => {\n        const product = event.currentTarget.value;\n        const $clickedCompareLink = $('a[data-compare-nav]');\n\n        if (event.currentTarget.checked) {\n            incrementCounter(compareCounter, product);\n        } else {\n            decrementCounter(compareCounter, product);\n        }\n\n        updateCounterNav(compareCounter, $clickedCompareLink, urls);\n    });\n\n    $('body').on('submit', '[data-product-compare]', event => {\n        const $this = $(event.currentTarget);\n        const productsToCompare = $this.find('input[name=\"products\\[\\]\"]:checked');\n\n        if (productsToCompare.length <= 1) {\n            showAlertModal(noCompareMessage);\n            event.preventDefault();\n        }\n    });\n\n    $('body').on('click', 'a[data-compare-nav]', () => {\n        const $clickedCheckedInput = $('body').find('input[name=\"products\\[\\]\"]:checked');\n\n        if ($clickedCheckedInput.length <= 1) {\n            showAlertModal(noCompareMessage);\n            return false;\n        }\n    });\n}\n","var isArray = require('./isArray');\n\n/**\n * Casts `value` as an array if it's not one.\n *\n * @static\n * @memberOf _\n * @since 4.4.0\n * @category Lang\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast array.\n * @example\n *\n * _.castArray(1);\n * // => [1]\n *\n * _.castArray({ 'a': 1 });\n * // => [{ 'a': 1 }]\n *\n * _.castArray('abc');\n * // => ['abc']\n *\n * _.castArray(null);\n * // => [null]\n *\n * _.castArray(undefined);\n * // => [undefined]\n *\n * _.castArray();\n * // => []\n *\n * var array = [1, 2, 3];\n * console.log(_.castArray(array) === array);\n * // => true\n */\nfunction castArray() {\n  if (!arguments.length) {\n    return [];\n  }\n  var value = arguments[0];\n  return isArray(value) ? value : [value];\n}\n\nmodule.exports = castArray;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","import PageManager from './page-manager';\nimport urlUtils from './common/utils/url-utils';\nimport Url from 'url';\n\nexport default class CatalogPage extends PageManager {\n    constructor(context) {\n        super(context);\n\n        window.addEventListener('beforeunload', () => {\n            if (document.activeElement.id === 'sort') {\n                window.localStorage.setItem('sortByStatus', 'selected');\n            }\n        });\n    }\n\n    arrangeFocusOnSortBy() {\n        const $sortBySelector = $('[data-sort-by=\"product\"] #sort');\n\n        if (window.localStorage.getItem('sortByStatus')) {\n            $sortBySelector.focus();\n            window.localStorage.removeItem('sortByStatus');\n        }\n    }\n\n    onSortBySubmit(event, currentTarget) {\n        const url = Url.parse(window.location.href, true);\n        const queryParams = $(currentTarget).serialize().split('=');\n\n        url.query[queryParams[0]] = queryParams[1];\n        delete url.query.page;\n\n        event.preventDefault();\n        window.location = Url.format({ pathname: url.pathname, search: urlUtils.buildQueryString(url.query) });\n    }\n}\n","import { hooks, api } from '@bigcommerce/stencil-utils';\nimport _ from 'lodash';\nimport Url from 'url';\nimport urlUtils from './utils/url-utils';\nimport modalFactory, { ModalEvents } from '../global/modal';\nimport collapsibleFactory from './collapsible';\nimport { Validators } from './utils/form-utils';\nimport nod from './nod';\n\n\nconst defaultOptions = {\n    accordionToggleSelector: '#facetedSearch .accordion-navigation, #facetedSearch .facetedSearch-toggle',\n    blockerSelector: '#facetedSearch .blocker',\n    clearFacetSelector: '#facetedSearch .facetedSearch-clearLink',\n    componentSelector: '#facetedSearch-navList',\n    facetNavListSelector: '#facetedSearch .navList',\n    priceRangeErrorSelector: '#facet-range-form .form-inlineMessage',\n    priceRangeFieldsetSelector: '#facet-range-form .form-fieldset',\n    priceRangeFormSelector: '#facet-range-form',\n    priceRangeMaxPriceSelector: '#facet-range-form [name=max_price]',\n    priceRangeMinPriceSelector: '#facet-range-form [name=min_price]',\n    showMoreToggleSelector: '#facetedSearch .accordion-content .toggleLink',\n    facetedSearchFilterItems: '#facetedSearch-filterItems .form-input',\n    modal: modalFactory('#modal')[0],\n    modalOpen: false,\n};\n\n/**\n * Faceted search view component\n */\nclass FacetedSearch {\n    /**\n     * @param {object} requestOptions - Object with options for the ajax requests\n     * @param {function} callback - Function to execute after fetching templates\n     * @param {object} options - Configurable options\n     * @example\n     *\n     * let requestOptions = {\n     *      templates: {\n     *          productListing: 'category/product-listing',\n     *          sidebar: 'category/sidebar'\n     *     }\n     * };\n     *\n     * let templatesDidLoad = function(content) {\n     *     $productListingContainer.html(content.productListing);\n     *     $facetedSearchContainer.html(content.sidebar);\n     * };\n     *\n     * let facetedSearch = new FacetedSearch(requestOptions, templatesDidLoad);\n     */\n    constructor(requestOptions, callback, options) {\n        // Private properties\n        this.requestOptions = requestOptions;\n        this.callback = callback;\n        this.options = _.extend({}, defaultOptions, options);\n        this.collapsedFacets = [];\n        this.collapsedFacetItems = [];\n\n        // Init collapsibles\n        collapsibleFactory();\n\n        // Init price validator\n        this.initPriceValidator();\n\n        // Show limited items by default\n        $(this.options.facetNavListSelector).each((index, navList) => {\n            this.collapseFacetItems($(navList));\n        });\n\n        // Mark initially collapsed accordions\n        $(this.options.accordionToggleSelector).each((index, accordionToggle) => {\n            const $accordionToggle = $(accordionToggle);\n            const collapsible = $accordionToggle.data('collapsibleInstance');\n\n            if (collapsible.isCollapsed) {\n                this.collapsedFacets.push(collapsible.targetId);\n            }\n        });\n\n        // Collapse all facets if initially hidden\n        // NOTE: Need to execute after Collapsible gets bootstrapped\n        setTimeout(() => {\n            if ($(this.options.componentSelector).is(':hidden')) {\n                this.collapseAllFacets();\n            }\n        });\n\n        // Observe user events\n        this.onStateChange = this.onStateChange.bind(this);\n        this.onToggleClick = this.onToggleClick.bind(this);\n        this.onAccordionToggle = this.onAccordionToggle.bind(this);\n        this.onClearFacet = this.onClearFacet.bind(this);\n        this.onFacetClick = this.onFacetClick.bind(this);\n        this.onRangeSubmit = this.onRangeSubmit.bind(this);\n        this.onSortBySubmit = this.onSortBySubmit.bind(this);\n        this.filterFacetItems = this.filterFacetItems.bind(this);\n\n        this.bindEvents();\n    }\n\n    // ITS custom to update options when list view changes\n    updateRequestOptions(opts) {\n        this.requestOptions = opts;\n    }\n\n    initMobileDropdowns() {\n        if (window.innerWidth < 1025) {\n            $('.page-sidebar nav').prependTo('#product-listing-container');\n        }\n    }\n\n    relocateMobileDropdowns() {\n        if (window.innerWidth < 1025) {\n            $('.page-sidebar nav').prependTo('#product-listing-container');\n        } else {\n            $('.sidebarNav').prependTo('#faceted-search-container');\n        }\n    }\n\n    // Public methods\n    refreshView(content) {\n        if (content) {\n            this.callback(content);\n        }\n\n        // Init collapsibles\n        collapsibleFactory();\n\n        // Init price validator\n        this.initPriceValidator();\n\n        // Restore view state\n        this.restoreCollapsedFacets();\n        this.restoreCollapsedFacetItems();\n\n        // Bind events\n        this.bindEvents();\n\n        // ITS custom trigger\n        $('body').triggerHandler('facetedSearchRefresh');\n\n        // run a dropdown handle?\n        console.log(\"moveDropDowns\");\n        this.initMobileDropdowns();\n    }\n\n    updateView() {\n        $(this.options.blockerSelector).show();\n\n        api.getPage(urlUtils.getUrl(), this.requestOptions, (err, content) => {\n            $(this.options.blockerSelector).hide();\n\n            if (err) {\n                throw new Error(err);\n            }\n\n            // Refresh view with new content\n            this.refreshView(content);\n        });\n    }\n\n    expandFacetItems($navList) {\n        const id = $navList.attr('id');\n\n        // Remove\n        this.collapsedFacetItems = _.without(this.collapsedFacetItems, id);\n    }\n\n    collapseFacetItems($navList) {\n        const id = $navList.attr('id');\n        const hasMoreResults = $navList.data('hasMoreResults');\n\n        if (hasMoreResults) {\n            this.collapsedFacetItems = _.union(this.collapsedFacetItems, [id]);\n        } else {\n            this.collapsedFacetItems = _.without(this.collapsedFacetItems, id);\n        }\n    }\n\n    toggleFacetItems($navList) {\n        const id = $navList.attr('id');\n\n        // Toggle depending on `collapsed` flag\n        if (_.includes(this.collapsedFacetItems, id)) {\n            this.getMoreFacetResults($navList);\n\n            return true;\n        }\n\n        this.collapseFacetItems($navList);\n\n        return false;\n    }\n\n    getMoreFacetResults($navList) {\n        const facet = $navList.data('facet');\n        const facetUrl = urlUtils.getUrl();\n\n        if (this.requestOptions.showMore) {\n            api.getPage(facetUrl, {\n                template: this.requestOptions.showMore,\n                params: {\n                    list_all: facet,\n                },\n            }, (err, response) => {\n                if (err) {\n                    throw new Error(err);\n                }\n\n                this.options.modal.open();\n                this.options.modalOpen = true;\n                this.options.modal.updateContent(response);\n            });\n        }\n\n        this.collapseFacetItems($navList);\n\n        return false;\n    }\n\n    filterFacetItems(event) {\n        const $items = $('.navList-item');\n        const query = $(event.currentTarget).val().toLowerCase();\n\n        $items.each((index, element) => {\n            const text = $(element).text().toLowerCase();\n            if (text.indexOf(query) !== -1) {\n                $(element).show();\n            } else {\n                $(element).hide();\n            }\n        });\n    }\n\n    expandFacet($accordionToggle) {\n        const collapsible = $accordionToggle.data('collapsibleInstance');\n\n        collapsible.open();\n    }\n\n    collapseFacet($accordionToggle) {\n        const collapsible = $accordionToggle.data('collapsibleInstance');\n\n        collapsible.close();\n    }\n\n    collapseAllFacets() {\n        const $accordionToggles = $(this.options.accordionToggleSelector);\n\n        $accordionToggles.each((index, accordionToggle) => {\n            const $accordionToggle = $(accordionToggle);\n\n            this.collapseFacet($accordionToggle);\n        });\n    }\n\n    expandAllFacets() {\n        const $accordionToggles = $(this.options.accordionToggleSelector);\n\n        $accordionToggles.each((index, accordionToggle) => {\n            const $accordionToggle = $(accordionToggle);\n\n            this.expandFacet($accordionToggle);\n        });\n    }\n\n    // Private methods\n    initPriceValidator() {\n        if ($(this.options.priceRangeFormSelector).length === 0) {\n            return;\n        }\n\n        const validator = nod();\n        const selectors = {\n            errorSelector: this.options.priceRangeErrorSelector,\n            fieldsetSelector: this.options.priceRangeFieldsetSelector,\n            formSelector: this.options.priceRangeFormSelector,\n            maxPriceSelector: this.options.priceRangeMaxPriceSelector,\n            minPriceSelector: this.options.priceRangeMinPriceSelector,\n        };\n\n        Validators.setMinMaxPriceValidation(validator, selectors, this.options.validationErrorMessages);\n\n        this.priceRangeValidator = validator;\n    }\n\n    restoreCollapsedFacetItems() {\n        const $navLists = $(this.options.facetNavListSelector);\n\n        // Restore collapsed state for each facet\n        $navLists.each((index, navList) => {\n            const $navList = $(navList);\n            const id = $navList.attr('id');\n            const shouldCollapse = _.includes(this.collapsedFacetItems, id);\n\n            if (shouldCollapse) {\n                this.collapseFacetItems($navList);\n            } else {\n                this.expandFacetItems($navList);\n            }\n        });\n    }\n\n    restoreCollapsedFacets() {\n        const $accordionToggles = $(this.options.accordionToggleSelector);\n\n        $accordionToggles.each((index, accordionToggle) => {\n            const $accordionToggle = $(accordionToggle);\n            const collapsible = $accordionToggle.data('collapsibleInstance');\n            const id = collapsible.targetId;\n            const shouldCollapse = _.includes(this.collapsedFacets, id);\n\n            if (shouldCollapse) {\n                this.collapseFacet($accordionToggle);\n            } else {\n                this.expandFacet($accordionToggle);\n            }\n        });\n    }\n\n    bindEvents() {\n        // Clean-up\n        this.unbindEvents();\n\n        // DOM events\n        $(window).on('statechange', this.onStateChange);\n        $(window).on('popstate', this.onPopState);\n        $(window).on('resize', this.relocateMobileDropdowns);\n        $(document).on('click', this.options.showMoreToggleSelector, this.onToggleClick);\n        $(document).on('toggle.collapsible', this.options.accordionToggleSelector, this.onAccordionToggle);\n        $(document).on('keyup', this.options.facetedSearchFilterItems, this.filterFacetItems);\n        $(this.options.clearFacetSelector).on('click', this.onClearFacet);\n\n        // Hooks\n        hooks.on('facetedSearch-facet-clicked', this.onFacetClick);\n        hooks.on('facetedSearch-range-submitted', this.onRangeSubmit);\n        hooks.on('sortBy-submitted', this.onSortBySubmit);\n    }\n\n    unbindEvents() {\n        // DOM events\n        $(window).off('statechange', this.onStateChange);\n        $(window).off('popstate', this.onPopState);\n        $(document).off('click', this.options.showMoreToggleSelector, this.onToggleClick);\n        $(document).off('toggle.collapsible', this.options.accordionToggleSelector, this.onAccordionToggle);\n        $(document).off('keyup', this.options.facetedSearchFilterItems, this.filterFacetItems);\n        $(this.options.clearFacetSelector).off('click', this.onClearFacet);\n\n        // Hooks\n        hooks.off('facetedSearch-facet-clicked', this.onFacetClick);\n        hooks.off('facetedSearch-range-submitted', this.onRangeSubmit);\n        hooks.off('sortBy-submitted', this.onSortBySubmit);\n    }\n\n    onClearFacet(event) {\n        const $link = $(event.currentTarget);\n        const url = $link.attr('href');\n\n        event.preventDefault();\n        event.stopPropagation();\n\n        // Update URL\n        urlUtils.goToUrl(url);\n    }\n\n    onToggleClick(event) {\n        const $toggle = $(event.currentTarget);\n        const $navList = $($toggle.attr('href'));\n\n        // Prevent default\n        event.preventDefault();\n\n        // Toggle visible items\n        this.toggleFacetItems($navList);\n    }\n\n    onFacetClick(event, currentTarget) {\n        const $link = $(currentTarget);\n        const url = $link.attr('href');\n\n        event.preventDefault();\n\n        $link.toggleClass('is-selected');\n\n        // Update URL\n        urlUtils.goToUrl(url);\n\n        if (this.options.modalOpen) {\n            this.options.modal.close();\n        }\n    }\n\n    onSortBySubmit(event, currentTarget) {\n        const url = Url.parse(window.location.href, true);\n        const queryParams = $(currentTarget).serialize().split('=');\n\n        url.query[queryParams[0]] = queryParams[1];\n        delete url.query.page;\n\n        // Url object `query` is not a traditional JavaScript Object on all systems, clone it instead\n        const urlQueryParams = {};\n        Object.assign(urlQueryParams, url.query);\n\n        event.preventDefault();\n\n        urlUtils.goToUrl(Url.format({ pathname: url.pathname, search: urlUtils.buildQueryString(urlQueryParams) }));\n    }\n\n    onRangeSubmit(event, currentTarget) {\n        event.preventDefault();\n\n        if (!this.priceRangeValidator.areAll(nod.constants.VALID)) {\n            return;\n        }\n\n        const url = Url.parse(window.location.href, true);\n        let queryParams = decodeURI($(currentTarget).serialize()).split('&');\n        queryParams = urlUtils.parseQueryParams(queryParams);\n\n        for (const key in queryParams) {\n            if (queryParams.hasOwnProperty(key)) {\n                url.query[key] = queryParams[key];\n            }\n        }\n\n        // Url object `query` is not a traditional JavaScript Object on all systems, clone it instead\n        const urlQueryParams = {};\n        Object.assign(urlQueryParams, url.query);\n\n        urlUtils.goToUrl(Url.format({ pathname: url.pathname, search: urlUtils.buildQueryString(urlQueryParams) }));\n    }\n\n    onStateChange() {\n        this.updateView();\n    }\n\n    onAccordionToggle(event) {\n        const $accordionToggle = $(event.currentTarget);\n        const collapsible = $accordionToggle.data('collapsibleInstance');\n        const id = collapsible.targetId;\n\n        if (collapsible.isCollapsed) {\n            this.collapsedFacets = _.union(this.collapsedFacets, [id]);\n        } else {\n            this.collapsedFacets = _.without(this.collapsedFacets, id);\n        }\n    }\n\n    onPopState() {\n        const currentUrl = window.location.href;\n        const searchParams = new URLSearchParams(currentUrl);\n        // If searchParams does not contain a page value then modify url query string to have page=1\n        if (!searchParams.has('page')) {\n            const linkUrl = $('.pagination-link').attr('href');\n            const re = /page=[0-9]+/i;\n            const updatedLinkUrl = linkUrl.replace(re, 'page=1');\n            window.history.replaceState({}, document.title, updatedLinkUrl);\n        }\n        $(window).trigger('statechange');\n    }\n}\n\nexport default FacetedSearch;\n","var baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nmodule.exports = union;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseDifference = require('./_baseDifference'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array excluding all given values using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.pull`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...*} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.xor\n * @example\n *\n * _.without([2, 1, 2, 3], 1, 2);\n * // => [3]\n */\nvar without = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, values)\n    : [];\n});\n\nmodule.exports = without;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","export default class ITSCategory {\n    constructor(context) {\n        this.context = context;\n    }\n\n    afterFacetUpdate() {\n\n    }\n}\n","import { api } from '@bigcommerce/stencil-utils';\nimport urlUtils from '../common/utils/url-utils';\n\nexport default class ToggleCategoryListingView {\n    constructor(context) {\n        this.context = context;\n        this.defaultViewType = this.context.defaultViewType;\n        this.oppositeViewType = this.defaultViewType !== 'grid' ? 'grid' : 'list';\n        this.productsPerPage = this.context.categoryProductsPerPage;\n        this.loadingOverlay = $('.loadingOverlay.loadingOverlay--product-listing');\n\n        $('body').on('facetedSearchRefresh', () => {\n            this.addToggleEvents();\n        });\n\n        this.init();\n        this.fullWidthTemplate();\n    }\n\n    getProductDescriptions() {\n        if ($('.listItem').length) {\n            console.log('IntuitSolutions -- Category Product Descriptions');\n\n            const $products = $('.listItem').toArray();\n            \n            const $productIDs = $products.map(item => {\n                return Number($(item).attr('data-entity-id'));\n            });\n            \n            const $graphQLToken = $('body').data('graphql');\n            fetch('/graphql', {\n                method: 'POST',\n                credentials: 'same-origin',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${$graphQLToken}`\n                },\n                body: JSON.stringify({\n                    query: `query {\n                        site {\n                            products(entityIds: [${$productIDs}], first: ${this.context.categoryProductsPerPage}) {\n                                edges {\n                                    node {\n                                        entityId\n                                        name\n                                        description\n                                    }\n                                }\n                            }\n                        }\n                    }`,\n                }),\n            })\n            .then(res => res.json())\n            .then(request => {\n                const gqlProducts = request.data.site.products.edges;\n                console.log(gqlProducts);\n\n                $products.forEach((product, i) => {\n                    gqlProducts.forEach(item => {\n                        if ($(product).data('entityId') === item.node.entityId) {\n                            $(product).find('.listItem__description').html(item.node.description);\n                        }\n                    })\n                });\n            });\n        }\n    }\n\n    getStoredViewType() {\n        return sessionStorage.getItem('category-view-type') || null;\n    }\n\n    getRequestTemplateType(type) {\n        const pageType = this.getStoredViewType();\n        return !pageType ? `${type}/product-listing` : `custom/category-${pageType}-view`;\n    }\n\n    storeViewType(type) {\n        sessionStorage.setItem('category-view-type', type);\n    }\n\n    addStyleClass() {\n        if ($('.listItem').length) {\n            $('body').addClass('list-view');\n        } else {\n            $('body').removeClass('list-view');\n        }\n    }\n\n    getCategoryPage(pageType) {\n        const config = {\n            config: {\n                category: {\n                    shop_by_price: true,\n                    products: {\n                        limit: this.productsPerPage,\n                    },\n                },\n            },\n            template: `custom/category-${pageType}-view`,\n        };\n\n        this.loadingOverlay.show();\n\n        api.getPage(urlUtils.getUrl(), config, (err, content) => {\n            if (err) {\n                throw new Error(err);\n            }\n\n            $('#product-listing-container').html(content);\n\n            this.loadingOverlay.hide();\n\n            this.storeViewType(pageType);\n\n            this.addToggleEvents();\n\n            $('body').triggerHandler('productViewModeChanged');\n\n            this.fullWidthTemplate();\n        });\n    }\n\n    addToggleEvents() {\n        $('.js-category__toggle-view').on('click', (e) => {\n            const type = $(e.currentTarget).data('view-type');\n\n            if ($(e.currentTarget).hasClass('active-category-view')) return;\n\n            this.getCategoryPage(type, this.addToggleEvents);\n        });\n    }\n\n    fullWidthTemplate() {\n        if ($('.list-full-width').length) {\n            this.getProductDescriptions();\n            this.addStyleClass();\n\n            // aGFja3kgc29sdXRpb24=\n            $(window).on('load', () => {\n                $('.list-img-container').toArray().forEach(img => {\n                    if ($(img).height() > 620) {\n                        $(img).addClass('adjust-list-img-height');\n                    }\n                })\n            });\n        }\n    }\n\n    init() {\n        const storedViewType = this.getStoredViewType();\n\n        if (storedViewType === this.defaultViewType || !storedViewType) {\n            return this.addToggleEvents();\n        }\n\n        this.getCategoryPage(this.oppositeViewType);\n    }\n}\n"],"sourceRoot":""}